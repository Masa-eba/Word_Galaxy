<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>情報系単語マインドマップ</title>
  <!-- ネットワーク可視化用のVis.js CDN -->
  <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <!-- BGM用のaudio要素 -->
  <audio id="bgm" loop>
    <source src="music/word-gragh.mp3" type="audio/mpeg">
    お使いのブラウザは音声再生をサポートしていません。
  </audio>

  <!-- ローディング画面 -->
  <div id="loading-overlay">
    <div class="loading-spinner"></div>
  </div>

  <!-- マインドマップのメインコンテナ -->
  <!-- ページタイトル -->
  <div class="page-title">2Dマインドマップ</div>
  
  <!-- Search bar -->
  <div id="search-container" class="">
    <div id="search-box">
      <input type="text" id="search-input" placeholder="単語を検索..." autocomplete="off">
      <button id="search-btn">🔍</button>
      <button id="clear-search-btn" class="hidden">&times;</button>
    </div>
    <div id="search-results" class="hidden">
      <!-- Search results will be populated here -->
    </div>
  </div>

  <!-- Main container for the mind map -->
  <div id="network"></div>

  <!-- 詳細オーバーレイ（デフォルトは非表示） -->
  <div id="details-overlay" class="hidden">
    <div id="details-box">
      <button id="close-details">&times;</button>
      <h3 id="details-title"></h3>
      <p id="details-text"></p>
    </div>
  </div>

  <!-- 単語帳選択用の作成/キャンセル -->
  <div id="flashcard-select-controls" class="hidden">
    <div class="edit-panel-header">
      <h3>単語帳作成</h3>
    </div>
    <div class="selected-words-container">
      <div class="selected-words-section">
        <h4>選択された単語</h4>
        <div id="selected-words-list">
          <!-- 選択された単語がここに表示されます -->
        </div>
      </div>
      <div class="add-word-section">
        <h4>単語を追加</h4>
        <input type="text" id="add-word-input" placeholder="単語を検索して追加...">
        <div id="add-word-suggestions" class="hidden">
          <!-- 検索候補がここに表示されます -->
        </div>
      </div>
      <div class="edit-panel-name-input">
        <label for="flashcard-name">単語帳の名前:</label>
        <input type="text" id="flashcard-name" placeholder="例: 基礎単語帳" maxlength="50">
      </div>
      <div class="edit-panel-buttons">
        <button id="create-flashcard-select" class="edit-btn">作成</button>
        <button id="cancel-flashcard-select" class="edit-btn">キャンセル</button>
      </div>
    </div>
  </div>

  <div class="corner-btn-group">
    <button id="zoom-out-btn" class="corner-btn">全体表示</button>
    <button id="view-flashcards" class="corner-btn" onclick="window.location.href='/flashcards.html'">単語帳一覧</button>
    <button id="create-flashcards" class="corner-btn">単語帳作成</button>
    <button id="toggle-rotate-btn" class="corner-btn">回転ON</button>
    <button id="toggle-bgm-btn" class="corner-btn">停止中</button>
  </div>

  <!-- 3D表示ボタン（ページタイトルの上に独立配置） -->
  <button id="view-3d" onclick="window.location.href='/3d.html'">3D表示</button>



  <!-- 単語帳ビュー（デフォルトは非表示） -->
  <div id="flashcard-view" class="hidden">
    <div id="flashcard-container">
      <div class="flashcard-header">
        <div class="card-counter">
          <span id="current-card-number">1</span> / <span id="total-cards">0</span>
        </div>
        <button id="back-to-map" class="close-btn">&times;</button>
      </div>

      <div class="cards-wrapper">
        <div id="flashcard" class="card">
          <div class="card-face card-front">
            <div class="card-content">
              <h2 class="card-title"></h2>
              <p class="card-hint">タップして裏面を見る</p>
            </div>
          </div>
          <div class="card-face card-back">
            <div class="card-content">
              <h3 class="card-subtitle">詳細</h3>
              <p class="card-description"></p>
            </div>
          </div>
        </div>
      </div>

      <div class="flashcard-controls">
        <button id="prev-card" class="control-btn">
          <span>←</span>
        </button>
        <button id="flip-card" class="control-btn flip-btn">
          <span>🔄</span>
        </button>
        <button id="next-card" class="control-btn">
          <span>→</span>
        </button>
      </div>



      <div class="progress-bar">
        <div class="progress-fill"></div>
      </div>
    </div>
  </div>

  <!-- テストモードビュー（デフォルトは非表示） -->
  <div id="test-view" class="hidden">
    <div id="test-container">
      <div class="test-header">
        <div class="test-counter">
          <span id="test-current-number">1</span> / <span id="test-total-questions">0</span>
        </div>
        <button id="back-from-test" class="close-btn">&times;</button>
      </div>

      <div class="test-question">
        <h2 id="test-question-text"></h2>
        <div id="test-options" class="test-options">
          <!-- 選択肢がここに表示されます -->
        </div>
      </div>

      <div class="test-controls">
        <button id="test-pass-btn" class="control-btn">
          <span>pass</span>
        </button>
        <button id="test-next-btn" class="control-btn">
          <span>next</span>
        </button>
      </div>

      <div class="test-progress-bar">
        <div class="test-progress-fill"></div>
      </div>
    </div>
  </div>



  <script src="app.js"></script>

</body>

</html>